# 統合特徴量ファイル カラム定義書

## 概要

このドキュメントは、`wikiart_vlm_features_with_gestalt_Stable-Diffusion.csv`ファイルの各カラムの詳細な定義を提供します。このファイルは、機械学習で抽出した色彩特徴量と、ゲシュタルト原則に基づいてLLM（LLaVA）が評価したスコアを統合したものです。

**ファイル情報**:
- 総行数: 17,328行（8,664ペア × 2 = Original + Generated）
- 総カラム数: 56カラム
- データ型: 数値特徴量は生の値（標準化前）で保存
  - 標準化はモデル訓練時に訓練データのみで適用される（データリーク防止）

---

## カラム一覧

### 1. 色彩特徴量（19カラム）

画像から抽出した色彩に関する数値特徴量です。HSV色空間での分析と、支配色分析（HSV統計量を使用）、明度分布分析を行っています。解釈性を重視し、支配色のRGB値を個別に使用せず、HSV統計量を使用しています。

### 2. テクスチャ特徴量（10カラム）

画像から抽出したテクスチャに関する数値特徴量です。GLCM（Gray-Level Co-occurrence Matrix）とLBP（Local Binary Pattern）を使用した分析を行っています。解釈性を重視し、LBPヒストグラムのビン特徴量は使用せず、統計量のみを使用しています。

### 3. エッジ特徴量（9カラム）

画像から抽出したエッジに関する数値特徴量です。Cannyエッジ検出を使用した分析を行っています。

### 4. メタデータカラム（6カラム）

画像の識別情報とラベル情報です。

### 5. ゲシュタルト原則スコア（12カラム）

LLM（LLaVA）が評価したゲシュタルト原則のスコアと説明です。各原則について、スコア（生の値）と説明文が含まれます。

---

## 詳細定義

### 1. 色彩特徴量（Color Features）

#### 1.1 HSV色空間の基本統計量

##### `mean_hue`
- **定義**: 色相（Hue）の平均値
- **計算方法**: HSV色空間に変換後、Hチャネルの全画素の平均値
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 179（HSV色空間でのHue値）
- **解釈**:
  - **0-30度**: 赤～オレンジ系（暖色系）
  - **30-60度**: 黄～黄緑系
  - **60-120度**: 緑系（寒色系）
  - **120-180度**: 青～紫系（寒色系）
- **特徴量重要度での解釈**: 高い重要度の場合、本物とフェイクの区別において色相が重要な指標となる

##### `mean_saturation`
- **定義**: 彩度（Saturation）の平均値
- **計算方法**: HSV色空間のSチャネルの全画素の平均値
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 255（HSV色空間でのSaturation値）
- **解釈**:
  - **正の値（大きい）**: 鮮やかで彩度の高い色が多い（カラフル）
  - **負の値（小さい）**: 彩度が低く、グレースケールに近い（モノクローム的）
  - **0付近**: 中程度の彩度
- **特徴量重要度での解釈**: 高い重要度の場合、色の鮮やかさが本物とフェイクの区別に重要

##### `mean_value`
- **定義**: 明度（Value/Brightness）の平均値
- **計算方法**: HSV色空間のVチャネルの全画素の平均値
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 255（HSV色空間でのValue値）
- **解釈**:
  - **正の値（大きい）**: 明るい画像
  - **負の値（小さい）**: 暗い画像
  - **0付近**: 中程度の明度
- **特徴量重要度での解釈**: 高い重要度の場合、画像の明るさが本物とフェイクの区別に重要

##### `hue_std`
- **定義**: 色相（Hue）の標準偏差
- **計算方法**: HSV色空間のHチャネルの全画素の標準偏差
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 90（データによって異なる）
- **解釈**:
  - **正の値（大きい）**: 色相のばらつきが大きい（多様な色が含まれる）
  - **負の値（小さい）**: 色相のばらつきが小さい（単色調に近い）
- **特徴量重要度での解釈**: 高い重要度の場合、色の多様性が本物とフェイクの区別に重要

##### `saturation_std`
- **定義**: 彩度（Saturation）の標準偏差
- **計算方法**: HSV色空間のSチャネルの全画素の標準偏差
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 128（データによって異なる）
- **解釈**:
  - **正の値（大きい）**: 彩度のばらつきが大きい（鮮やかな部分とくすんだ部分が混在）
  - **負の値（小さい）**: 彩度が均一（一貫した彩度）
- **特徴量重要度での解釈**: 高い重要度の場合、彩度の分布の違いが本物とフェイクの区別に重要

##### `value_std`
- **定義**: 明度（Value）の標準偏差
- **計算方法**: HSV色空間のVチャネルの全画素の標準偏差
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 128（データによって異なる）
- **解釈**:
  - **正の値（大きい）**: 明度のばらつきが大きい（明暗のコントラストが大きい）
  - **負の値（小さい）**: 明度が均一（フラットな明度）
- **特徴量重要度での解釈**: 高い重要度の場合、明度の分布の違いが本物とフェイクの区別に重要

##### `color_diversity`
- **定義**: 色の多様性（色相の分散）
- **計算方法**: HSV色空間のHチャネルの分散（`np.var(h)`）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 8000（データによって異なる）
- **解釈**:
  - **正の値（大きい）**: 色の多様性が高い（多くの異なる色が含まれる）
  - **負の値（小さい）**: 色の多様性が低い（限られた色のみ）
- **特徴量重要度での解釈**: 高い重要度の場合、色の多様性が本物とフェイクの区別に重要

#### 1.2 支配色の特徴量（Dominant Colors）

K-meansクラスタリング（k=5）を使用して、画像内の支配的な色を5つ抽出し、解釈性を重視してHSV色空間での統計量を使用しています。

##### `dominant_color_hue_mean`
- **定義**: 支配色の色相（Hue）の平均値
- **計算方法**: K-meansで抽出した5つの支配色のRGB値をHSVに変換し、色相（H）の平均を計算
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 179（HSV色空間でのHue値）
- **解釈**:
  - **0-30度**: 赤～オレンジ系（暖色系）
  - **30-60度**: 黄～黄緑系
  - **60-120度**: 緑系（寒色系）
  - **120-180度**: 青～紫系（寒色系）
- **特徴量重要度での解釈**: 高い重要度の場合、画像の主要な色相が本物とフェイクの区別に重要

##### `dominant_color_hue_std`
- **定義**: 支配色の色相（Hue）の標準偏差
- **計算方法**: 5つの支配色の色相の標準偏差
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 90（データによって異なる）
- **解釈**:
  - **値が大きい**: 支配色の色相が多様（様々な色相の色が含まれる）
  - **値が小さい**: 支配色の色相が類似（限られた色相の色のみ）
- **特徴量重要度での解釈**: 高い重要度の場合、支配色の色相の多様性が本物とフェイクの区別に重要

##### `dominant_color_saturation_mean`
- **定義**: 支配色の彩度（Saturation）の平均値
- **計算方法**: 5つの支配色の彩度（S）の平均を計算
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 255（HSV色空間でのSaturation値）
- **解釈**:
  - **値が大きい**: 支配色が鮮やか（カラフル）
  - **値が小さい**: 支配色がくすんでいる（モノクローム的）
- **特徴量重要度での解釈**: 高い重要度の場合、支配色の鮮やかさが本物とフェイクの区別に重要

##### `dominant_color_saturation_std`
- **定義**: 支配色の彩度（Saturation）の標準偏差
- **計算方法**: 5つの支配色の彩度の標準偏差
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 128（データによって異なる）
- **解釈**:
  - **値が大きい**: 支配色の彩度が多様（鮮やかな色とくすんだ色が混在）
  - **値が小さい**: 支配色の彩度が均一（一貫した彩度）
- **特徴量重要度での解釈**: 高い重要度の場合、支配色の彩度のばらつきが本物とフェイクの区別に重要

##### `dominant_color_value_mean`
- **定義**: 支配色の明度（Value）の平均値
- **計算方法**: 5つの支配色の明度（V）の平均を計算
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 255（HSV色空間でのValue値）
- **解釈**:
  - **値が大きい**: 支配色が明るい
  - **値が小さい**: 支配色が暗い
- **特徴量重要度での解釈**: 高い重要度の場合、支配色の明るさが本物とフェイクの区別に重要

##### `dominant_color_value_std`
- **定義**: 支配色の明度（Value）の標準偏差
- **計算方法**: 5つの支配色の明度の標準偏差
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 128（データによって異なる）
- **解釈**:
  - **値が大きい**: 支配色の明度が多様（明るい色と暗い色が混在）
  - **値が小さい**: 支配色の明度が均一（一貫した明度）
- **特徴量重要度での解釈**: 高い重要度の場合、支配色の明度のばらつきが本物とフェイクの区別に重要

##### `dominant_color_ratio_max`
- **定義**: 支配色の占有率の最大値
- **計算方法**: 5つの支配色の占有率の最大値
- **データ型**: `float64`（生の値）
- **範囲**: 0.0 ～ 1.0（比率）
- **解釈**:
  - **値が大きい**: 最も支配的な色が画像の大部分を占める（単色調に近い）
  - **値が小さい**: 支配色が分散している（多色調）
- **特徴量重要度での解釈**: 高い重要度の場合、支配色の集中度が本物とフェイクの区別に重要

##### `dominant_color_ratio_mean`
- **定義**: 支配色の占有率の平均値
- **計算方法**: 5つの支配色の占有率の平均を計算
- **データ型**: `float64`（生の値）
- **範囲**: 0.0 ～ 1.0（比率、理論的には0.2に近い）
- **解釈**:
  - **値が大きい**: 支配色が均等に分布している（多色調）
  - **値が小さい**: 支配色が偏っている（特定の色に集中）
- **特徴量重要度での解釈**: 高い重要度の場合、支配色の分布の均等性が本物とフェイクの区別に重要

##### `dominant_color_ratio_std`
- **定義**: 支配色の占有率の標準偏差
- **計算方法**: 5つの支配色の占有率の標準偏差
- **データ型**: `float64`（生の値）
- **範囲**: 0.0 ～ 約 0.4（データによって異なる）
- **解釈**:
  - **値が大きい**: 支配色の占有率のばらつきが大きい（特定の色に集中）
  - **値が小さい**: 支配色の占有率が均等（多色調）
- **特徴量重要度での解釈**: 高い重要度の場合、支配色の占有率のばらつきが本物とフェイクの区別に重要

#### 1.3 明度分布の特徴量（Brightness Distribution）

HSV色空間のVチャネル（明度）の分布を統計的に分析した特徴量です。

##### `brightness_skewness`
- **定義**: 明度分布の歪度（Skewness）
- **計算方法**: 
  ```python
  mean = np.mean(v_channel)
  std = np.std(v_channel)
  skewness = np.mean(((v_channel - mean) / std) ** 3)
  ```
- **データ型**: `float64`（生の値）
- **範囲**: 約 -2 ～ 2（データによって異なる）
- **解釈**:
  - **正の値（大きい）**: 右に歪んだ分布（暗い画素が多い、明るい画素が少ない）
  - **負の値（小さい）**: 左に歪んだ分布（明るい画素が多い、暗い画素が少ない）
  - **0付近**: 対称的な分布
- **特徴量重要度での解釈**: 高い重要度の場合、明度分布の非対称性が本物とフェイクの区別に重要

##### `brightness_kurtosis`
- **定義**: 明度分布の尖度（Kurtosis）
- **計算方法**: 
  ```python
  mean = np.mean(v_channel)
  std = np.std(v_channel)
  kurtosis = np.mean(((v_channel - mean) / std) ** 4) - 3
  ```
- **データ型**: `float64`（生の値）
- **範囲**: 約 -2 ～ 10（データによって異なる）
- **解釈**:
  - **正の値（大きい）**: 尖った分布（ピークが鋭い、極端な値が多い）
  - **負の値（小さい）**: 平坦な分布（ピークが緩やか、極端な値が少ない）
  - **0付近**: 正規分布に近い
- **特徴量重要度での解釈**: 高い重要度の場合、明度分布の尖り具合が本物とフェイクの区別に重要

##### `brightness_entropy`
- **定義**: 明度分布のエントロピー（情報量）
- **計算方法**: 明度ヒストグラム（10ビン）のエントロピー
  ```python
  hist, bins = np.histogram(v_channel, bins=10, range=(0, 256))
  hist_norm = hist / np.sum(hist)
  entropy = -np.sum(hist_norm * np.log2(hist_norm))
  ```
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ log2(10) ≈ 3.32（10ビンの場合）
- **解釈**:
  - **正の値（大きい）**: 明度分布が均等（情報量が多い、多様な明度が含まれる）
  - **負の値（小さい）**: 明度分布が偏っている（情報量が少ない、特定の明度に集中）
- **特徴量重要度での解釈**: 高い重要度の場合、明度分布の複雑さが本物とフェイクの区別に重要

---

### 2. テクスチャ特徴量（Texture Features）

画像のテクスチャ（質感）を分析した特徴量です。GLCMとLBPを使用して、画像のテクスチャパターンを数値化しています。

#### 2.1 GLCM特徴量（Gray-Level Co-occurrence Matrix）

グレースケール画像の画素間の共起関係を分析した特徴量です。距離=1、角度=0, 45, 90, 135度で計算し、全角度の平均を取っています。

##### `texture_glcm_contrast`
- **定義**: GLCMコントラスト（局所的な明度の変化）
- **計算方法**: `graycoprops(glcm, 'contrast').mean()`（全角度の平均）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 1000（データによって異なる）
- **解釈**:
  - **値が大きい**: 局所的な明度の変化が大きい（テクスチャが粗い、コントラストが高い）
  - **値が小さい**: 局所的な明度の変化が小さい（テクスチャが滑らか、コントラストが低い）
- **特徴量重要度での解釈**: 高い重要度の場合、テクスチャの粗さが本物とフェイクの区別に重要

##### `texture_glcm_dissimilarity`
- **定義**: GLCM非類似度（画素間の明度の差）
- **計算方法**: `graycoprops(glcm, 'dissimilarity').mean()`（全角度の平均）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 50（データによって異なる）
- **解釈**:
  - **値が大きい**: 画素間の明度の差が大きい（テクスチャが不均一）
  - **値が小さい**: 画素間の明度の差が小さい（テクスチャが均一）
- **特徴量重要度での解釈**: 高い重要度の場合、テクスチャの均一性が本物とフェイクの区別に重要

##### `texture_glcm_homogeneity`
- **定義**: GLCM均質性（画素間の類似度）
- **計算方法**: `graycoprops(glcm, 'homogeneity').mean()`（全角度の平均）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 1（通常は0.5 ～ 1.0）
- **解釈**:
  - **値が大きい（1に近い）**: 画素間の類似度が高い（テクスチャが均一、滑らか）
  - **値が小さい（0に近い）**: 画素間の類似度が低い（テクスチャが不均一、粗い）
- **特徴量重要度での解釈**: 高い重要度の場合、テクスチャの均質性が本物とフェイクの区別に重要

##### `texture_glcm_energy`
- **定義**: GLCMエネルギー（ASM: Angular Second Moment）
- **計算方法**: `graycoprops(glcm, 'energy').mean()`（全角度の平均）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 1（通常は0.01 ～ 0.5）
- **解釈**:
  - **値が大きい**: テクスチャが規則的（繰り返しパターンが多い）
  - **値が小さい**: テクスチャが不規則（ランダムなパターンが多い）
- **特徴量重要度での解釈**: 高い重要度の場合、テクスチャの規則性が本物とフェイクの区別に重要

##### `texture_glcm_correlation`
- **定義**: GLCM相関（画素間の線形関係）
- **計算方法**: `graycoprops(glcm, 'correlation').mean()`（全角度の平均）
- **データ型**: `float64`（生の値）
- **範囲**: -1 ～ 1（通常は0.1 ～ 0.9）
- **解釈**:
  - **値が大きい（1に近い）**: 画素間の線形関係が強い（テクスチャが規則的）
  - **値が小さい（-1に近い）**: 画素間の線形関係が弱い（テクスチャが不規則）
- **特徴量重要度での解釈**: 高い重要度の場合、テクスチャの相関性が本物とフェイクの区別に重要

#### 2.2 LBP特徴量（Local Binary Pattern）

局所的なテクスチャパターンを分析した特徴量です。半径=1、近傍点数=8で計算し、uniformパターンを使用しています。

##### `texture_lbp_mean`
- **定義**: LBP値の平均
- **計算方法**: `np.mean(lbp)`（LBP画像の全画素の平均）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 10（データによって異なる）
- **解釈**:
  - **値が大きい**: 局所的なテクスチャパターンが複雑
  - **値が小さい**: 局所的なテクスチャパターンが単純
- **特徴量重要度での解釈**: 高い重要度の場合、局所的なテクスチャの複雑さが本物とフェイクの区別に重要

##### `texture_lbp_std`
- **定義**: LBP値の標準偏差
- **計算方法**: `np.std(lbp)`（LBP画像の全画素の標準偏差）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 5（データによって異なる）
- **解釈**:
  - **値が大きい**: LBP値のばらつきが大きい（テクスチャが多様）
  - **値が小さい**: LBP値のばらつきが小さい（テクスチャが均一）
- **特徴量重要度での解釈**: 高い重要度の場合、テクスチャの多様性が本物とフェイクの区別に重要

##### `texture_lbp_histogram_entropy`
- **定義**: LBPヒストグラムのエントロピー（情報量）
- **計算方法**: `-np.sum(hist_nonzero * np.log2(hist_nonzero))`（LBPヒストグラムから計算）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ log2(10) ≈ 3.32（10ビンの場合）
- **解釈**:
  - **値が大きい**: LBPパターンが多様（エントロピーが高い、テクスチャが複雑）
  - **値が小さい**: LBPパターンが限定的（エントロピーが低い、テクスチャが単純）
- **特徴量重要度での解釈**: 高い重要度の場合、テクスチャパターンの多様性が本物とフェイクの区別に重要
  - 本物の絵画は、筆触や技法により多様なテクスチャパターンを持つ傾向がある
  - AI生成画像は、生成プロセスの特性により、テクスチャパターンが限定的になる可能性がある

##### `texture_lbp_histogram_skewness`
- **定義**: LBPヒストグラムの歪度（分布の非対称性）
- **計算方法**: `np.mean((hist_centered / hist_std) ** 3)`（LBPヒストグラムから計算）
- **データ型**: `float64`（生の値）
- **範囲**: 約 -2 ～ 2（データによって異なる）
- **解釈**:
  - **正の値（大きい）**: 右に歪んだ分布（高LBP値のパターンが多い、複雑なテクスチャが多い）
  - **負の値（小さい）**: 左に歪んだ分布（低LBP値のパターンが多い、単純なテクスチャが多い）
  - **0付近**: 対称的な分布
- **特徴量重要度での解釈**: 高い重要度の場合、LBPパターン分布の非対称性が本物とフェイクの区別に重要
  - 本物の絵画は、特定のテクスチャパターンに偏る傾向がある可能性がある
  - AI生成画像は、テクスチャパターンの分布が異なる可能性がある

##### `texture_lbp_histogram_kurtosis`
- **定義**: LBPヒストグラムの尖度（分布の尖り具合）
- **計算方法**: `np.mean((hist_centered / hist_std) ** 4) - 3`（LBPヒストグラムから計算）
- **データ型**: `float64`（生の値）
- **範囲**: 約 -2 ～ 10（データによって異なる）
- **解釈**:
  - **正の値（大きい）**: 尖った分布（特定のLBPパターンに集中、テクスチャが均一）
  - **負の値（小さい）**: 平坦な分布（LBPパターンが分散、テクスチャが多様）
  - **0付近**: 正規分布に近い
- **特徴量重要度での解釈**: 高い重要度の場合、LBPパターン分布の尖り具合が本物とフェイクの区別に重要
  - 本物の絵画は、特定のテクスチャパターンに集中する傾向がある可能性がある
  - AI生成画像は、テクスチャパターンが分散する傾向がある可能性がある

---

### 3. エッジ特徴量（Edge Features）

画像のエッジ（輪郭）を分析した特徴量です。Cannyエッジ検出を使用して、エッジの密度、長さ、方向性、滑らかさ、曲率を数値化しています。

#### 3.1 エッジ密度とカウント

##### `edge_density`
- **定義**: エッジ密度（エッジ画素の割合）
- **計算方法**: `np.sum(edges > 0) / edges.size`
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 1（通常は0.01 ～ 0.3）
- **解釈**:
  - **値が大きい**: エッジが多い（輪郭が複雑、詳細が多い）
  - **値が小さい**: エッジが少ない（輪郭が単純、詳細が少ない）
- **特徴量重要度での解釈**: 高い重要度の場合、エッジの密度が本物とフェイクの区別に重要

##### `edge_count`
- **定義**: エッジコンポーネントの数
- **計算方法**: `cv2.connectedComponentsWithStats(edges)`で検出されたコンポーネント数（背景を除く）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 1000（データによって異なる）
- **解釈**:
  - **値が大きい**: エッジコンポーネントが多い（輪郭が細かく分割されている）
  - **値が小さい**: エッジコンポーネントが少ない（輪郭が統合されている）
- **特徴量重要度での解釈**: 高い重要度の場合、エッジコンポーネントの数が本物とフェイクの区別に重要

#### 3.2 エッジ長さ

##### `edge_mean_length`
- **定義**: エッジコンポーネントの平均長さ（面積）
- **計算方法**: `np.mean(component_sizes)`（コンポーネントサイズの平均）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 10000（データによって異なる）
- **解釈**:
  - **値が大きい**: エッジコンポーネントが大きい（長い輪郭が多い）
  - **値が小さい**: エッジコンポーネントが小さい（短い輪郭が多い）
- **特徴量重要度での解釈**: 高い重要度の場合、エッジの平均長さが本物とフェイクの区別に重要

##### `edge_std_length`
- **定義**: エッジコンポーネントの標準偏差（長さのばらつき）
- **計算方法**: `np.std(component_sizes)`（コンポーネントサイズの標準偏差）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 5000（データによって異なる）
- **解釈**:
  - **値が大きい**: エッジ長さのばらつきが大きい（多様な長さの輪郭）
  - **値が小さい**: エッジ長さのばらつきが小さい（均一な長さの輪郭）
- **特徴量重要度での解釈**: 高い重要度の場合、エッジ長さのばらつきが本物とフェイクの区別に重要

#### 3.3 エッジ方向性

##### `edge_orientation_mean`
- **定義**: エッジ方向の平均（ラジアン）
- **計算方法**: `cv2.HoughLines()`で検出された線の角度の平均
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ π（ラジアン）
- **解釈**:
  - **値**: エッジの主な方向（0: 水平、π/2: 垂直、π/4: 斜め45度など）
- **特徴量重要度での解釈**: 高い重要度の場合、エッジの主な方向が本物とフェイクの区別に重要

##### `edge_orientation_std`
- **定義**: エッジ方向の標準偏差（方向のばらつき）
- **計算方法**: `np.std(angles)`（線の角度の標準偏差）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ π/2（ラジアン）
- **解釈**:
  - **値が大きい**: エッジ方向のばらつきが大きい（多様な方向の輪郭）
  - **値が小さい**: エッジ方向のばらつきが小さい（均一な方向の輪郭）
- **特徴量重要度での解釈**: 高い重要度の場合、エッジ方向のばらつきが本物とフェイクの区別に重要

#### 3.4 エッジ滑らかさと曲率

##### `edge_smoothness`
- **定義**: エッジの滑らかさ（曲率の逆数）
- **計算方法**: `1.0 / (np.mean(curvatures) + 1e-7)`
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ 約 100（データによって異なる）
- **解釈**:
  - **値が大きい**: エッジが滑らか（曲率が小さい）
  - **値が小さい**: エッジが粗い（曲率が大きい）
- **特徴量重要度での解釈**: 高い重要度の場合、エッジの滑らかさが本物とフェイクの区別に重要

##### `edge_curvature_mean`
- **定義**: エッジ曲率の平均（ラジアン）
- **計算方法**: 輪郭点での角度変化の平均
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ π（ラジアン）
- **解釈**:
  - **値が大きい**: エッジの曲率が大きい（急な角度変化が多い）
  - **値が小さい**: エッジの曲率が小さい（緩やかな角度変化が多い）
- **特徴量重要度での解釈**: 高い重要度の場合、エッジの曲率が本物とフェイクの区別に重要

##### `edge_curvature_std`
- **定義**: エッジ曲率の標準偏差（曲率のばらつき）
- **計算方法**: `np.std(curvatures)`（曲率の標準偏差）
- **データ型**: `float64`（生の値）
- **範囲**: 0 ～ π/2（ラジアン）
- **解釈**:
  - **値が大きい**: エッジ曲率のばらつきが大きい（多様な曲率の輪郭）
  - **値が小さい**: エッジ曲率のばらつきが小さい（均一な曲率の輪郭）
- **特徴量重要度での解釈**: 高い重要度の場合、エッジ曲率のばらつきが本物とフェイクの区別に重要

---

### 4. メタデータカラム（Metadata Columns）

#### `image_id`
- **定義**: 画像の識別ID
- **データ型**: `object` (string)
- **形式**: 
  - Original画像: 数値文字列（例: `"10194"`）
  - Generated画像: 数値文字列 + `"_generated"`（例: `"10194_generated"`）
- **ユニーク数**: 17,328
- **解釈**: 各画像ペア（Original + Generated）を識別するための一意のID

#### `image_path`
- **定義**: 画像ファイルのパス
- **データ型**: `object` (string)
- **形式**: 
  - Original画像: `"data/WikiArt_VLM-main/images/Original/{image_name}"`
  - Generated画像: `"data/WikiArt_VLM-main/images/Stable-Diffusion/{image_name}"`
- **ユニーク数**: 17,328
- **解釈**: 画像ファイルの相対パス

#### `label`
- **定義**: 分類ラベル（本物 vs フェイク）
- **データ型**: `int64`
- **値**: 
  - `0`: 本物（Authentic, Original画像）
  - `1`: フェイク（Fake, Generated画像）
- **分布**: 
  - `0`: 8,664行
  - `1`: 8,664行
- **解釈**: 機械学習モデルの予測対象ラベル

#### `source`
- **定義**: 画像のソース
- **データ型**: `object` (string)
- **値**: 
  - `"Original"`: 本物の画像（WikiArtデータセットから）
  - `"Stable-Diffusion"`: AI生成画像（Stable-Diffusionで生成）
- **分布**: 
  - `"Original"`: 8,664行
  - `"Stable-Diffusion"`: 8,664行
- **解釈**: 画像の出所を表す

#### `generation_model`
- **定義**: 生成モデル名
- **データ型**: `object` (string)
- **値**: 
  - `"Original"`: 本物の画像
  - `"Stable-Diffusion"`: Stable-Diffusionで生成された画像
- **分布**: 
  - `"Original"`: 8,664行
  - `"Stable-Diffusion"`: 8,664行
- **解釈**: 生成モデル名（将来的にFLUX、F-Liteなども追加可能）

#### `image_name`
- **定義**: 画像ファイル名
- **データ型**: `object` (string)
- **形式**: `"{image_id}.jpg"`（例: `"10194.jpg"`）
- **ユニーク数**: 8,664（OriginalとGeneratedで同じファイル名）
- **解釈**: 画像ファイル名（拡張子を含む）

---

### 5. ゲシュタルト原則スコア（Gestalt Principle Scores）

LLM（LLaVA 7B）が評価したゲシュタルト原則のスコアです。各原則について、1-5の整数スコアが付けられ、生の値で保存されています（標準化はモデル訓練時に適用されます）。

#### スコアリング方法

- **評価方法**: Ollama（LLaVA 7B）を使用したVision-Language Modelによる評価
- **プロンプト**: arXiv 2504.12511論文のアプローチを参考に設計
- **元のスケール**: 1-5の整数値（1 = poor adherence, 5 = excellent adherence）
- **保存形式**: 生の値（1-5の整数値）で保存
- **標準化**: モデル訓練時に訓練データのみでStandardScalerを適用（データリーク防止）
- **説明文**: 各スコアに対して、LLMが生成した説明文が含まれる

#### 元のスコアの分布（標準化前）

実際のデータセットでの元のスコア（1-5の整数値）の分布：

- **simplicity_score**: 
  - 平均値: 4.00, 標準偏差: 0.47
  - 分布: 1点(1件), 2点(5件), 3点(1,917件), 4点(13,481件), 5点(1,924件)
  - 傾向: 4点が最も多く、全体の約77.8%を占める

- **proximity_score**: 
  - 平均値: 3.89, 標準偏差: 0.81
  - 分布: 1点(1件), 2点(50件), 3点(6,571件), 4点(5,922件), 5点(4,784件)
  - 傾向: 3-5点に分布し、3点と5点が多い

- **similarity_score**: 
  - 平均値: 3.82, 標準偏差: 0.58
  - 分布: 2点(150件), 3点(4,240件), 4点(11,453件), 5点(1,485件)
  - 傾向: 4点が最も多く、全体の約66.1%を占める

- **continuity_score**: 
  - 平均値: 3.99, 標準偏差: 0.81
  - 分布: 1点(2件), 2点(412件), 3点(4,514件), 4点(7,239件), 5点(5,161件)
  - 傾向: 4-5点に分布し、4点と5点が多い

- **closure_score**: 
  - 平均値: 3.98, 標準偏差: 0.91
  - 分布: 1点(3件), 2点(993件), 3点(4,315件), 4点(6,076件), 5点(5,941件)
  - 傾向: 3-5点に分布し、4点と5点が多い

- **figure_ground_score**: 
  - 平均値: 4.35, 標準偏差: 0.52
  - 分布: 2点(14件), 3点(352件), 4点(10,571件), 5点(6,391件)
  - 傾向: 4-5点が圧倒的に多く、全体の約97.9%を占める

**解釈**:
- ほとんどのゲシュタルト原則スコアは、3-5点の範囲に集中している
- これは、WikiArtデータセットの画像（特にImpressionism）が、ゲシュタルト原則に比較的良好に従っていることを示唆
- 図地分離（figure_ground_score）が最も高く、連続性（continuity_score）と閉合性（closure_score）も高い傾向
- 簡潔性（simplicity_score）は4点が最も多く、比較的シンプルな構成が多い

#### 3.1 簡潔性（Simplicity）

##### `simplicity_score`
- **定義**: 簡潔性原則のスコア
- **英語名**: Simplicity
- **日本語名**: 簡潔性
- **原則の説明**: The tendency to perceive the simplest interpretation of visual elements. Simpler compositions are easier to understand and remember.
- **元のスケール**: 1-5の整数値
- **データ型**: `float64`（生の値、1-5の整数値）
- **範囲**: 1 ～ 5（整数値）
- **解釈**:
  - **正の値（大きい）**: 簡潔性が高い（シンプルで理解しやすい構成）
  - **負の値（小さい）**: 簡潔性が低い（複雑で理解しにくい構成）
- **特徴量重要度での解釈**: 
  - 高い重要度の場合、画像の簡潔さが本物とフェイクの区別に重要
  - 本物の絵画は、長年の芸術的訓練により簡潔な構成になりやすい
  - AI生成画像は、プロンプトの複雑さやモデルの特性により、複雑な構成になりやすい

##### `simplicity_explanation`
- **定義**: 簡潔性スコアの説明文
- **データ型**: `object` (string)
- **形式**: LLMが生成した説明文（英語）
- **例**: `"The image is moderately simple, with a clear focus on the snowy street scene. The use of muted colors and the absence of excessive detail contribute to its simplicity."`
- **欠損値**: 1件（17,329行中1行が欠損）
- **解釈**: スコアの根拠を理解するための説明文

#### 3.2 近接性（Proximity）

##### `proximity_score`
- **定義**: 近接性原則のスコア
- **英語名**: Proximity
- **日本語名**: 近接性
- **原則の説明**: Elements that are close together are perceived as related or grouped. Spatial distance affects perceived relationships.
- **元のスケール**: 1-5の整数値
- **データ型**: `float64`（生の値、1-5の整数値）
- **範囲**: 1 ～ 5（整数値）
- **解釈**:
  - **正の値（大きい）**: 近接性が高い（近くの要素がグループとして認識される）
  - **負の値（小さい）**: 近接性が低い（要素が分散している、グループ化が弱い）
- **特徴量重要度での解釈**: 
  - 高い重要度の場合、要素の配置の近接性が本物とフェイクの区別に重要
  - 本物の絵画は、構図の訓練により要素の配置が意図的に近接している
  - AI生成画像は、ランダムな配置や不自然な近接関係になりやすい

##### `proximity_explanation`
- **定義**: 近接性スコアの説明文
- **データ型**: `object` (string)
- **形式**: LLMが生成した説明文（英語）
- **例**: `"The people are grouped closely together near the buildings, indicating a strong sense of proximity. This creates a cohesive scene that is easy to understand."`
- **欠損値**: 1件
- **解釈**: スコアの根拠を理解するための説明文

#### 3.3 類同（Similarity）

##### `similarity_score`
- **定義**: 類同原則のスコア
- **英語名**: Similarity
- **日本語名**: 類同
- **原則の説明**: Similar elements (in color, shape, size, texture, etc.) are perceived as belonging together or forming a group.
- **元のスケール**: 1-5の整数値
- **データ型**: `float64`（生の値、1-5の整数値）
- **範囲**: 1 ～ 5（整数値）
- **解釈**:
  - **正の値（大きい）**: 類同性が高い（類似した要素がグループとして認識される）
  - **負の値（小さい）**: 類同性が低い（要素が多様で、グループ化が弱い）
- **特徴量重要度での解釈**: 
  - 高い重要度の場合、要素の類似性が本物とフェイクの区別に重要
  - 本物の絵画は、色調や形状の統一性により、類似した要素が意図的に配置されている
  - AI生成画像は、不自然な類似性や不統一な要素配置になりやすい

##### `similarity_explanation`
- **定義**: 類同スコアの説明文
- **データ型**: `object` (string)
- **形式**: LLMが生成した説明文（英語）
- **例**: `"There is a degree of similarity in the colors and textures used for the buildings, which helps to create a sense of unity within the image. However, there are also some variations in color and texture that can be seen as breaking up the continuity."`
- **欠損値**: 1件
- **解釈**: スコアの根拠を理解するための説明文

#### 3.4 連続性（Continuity）

##### `continuity_score`
- **定義**: 連続性原則のスコア
- **英語名**: Continuity
- **日本語名**: 連続性
- **原則の説明**: The tendency to perceive continuous, smooth lines or paths rather than disconnected segments. The eye follows smooth curves.
- **元のスケール**: 1-5の整数値
- **データ型**: `float64`（生の値、1-5の整数値）
- **範囲**: 1 ～ 5（整数値）
- **解釈**:
  - **正の値（大きい）**: 連続性が高い（滑らかな線やパスが認識される）
  - **負の値（小さい）**: 連続性が低い（断片的な線や不連続なパス）
- **特徴量重要度での解釈**: 
  - 高い重要度の場合、線やパスの連続性が本物とフェイクの区別に重要
  - 本物の絵画は、筆の動きや構図により、滑らかな連続性が生まれる
  - AI生成画像は、不自然な断続や不連続な線になりやすい

##### `continuity_explanation`
- **定義**: 連続性スコアの説明文
- **データ型**: `object` (string)
- **形式**: LLMが生成した説明文（英語）
- **例**: `"The lines created by the buildings and the street itself provide a sense of continuity. However, there are also some disruptions in the form of people and other objects that break up the smooth flow of the scene."`
- **欠損値**: 1件
- **解釈**: スコアの根拠を理解するための説明文

#### 3.5 閉合性（Closure）

##### `closure_score`
- **定義**: 閉合性原則のスコア
- **英語名**: Closure
- **日本語名**: 閉合性
- **原則の説明**: The tendency to perceive incomplete shapes as complete by mentally filling in gaps. Closed forms are perceived as more stable.
- **元のスケール**: 1-5の整数値
- **データ型**: `float64`（生の値、1-5の整数値）
- **範囲**: 1 ～ 5（整数値）
- **解釈**:
  - **正の値（大きい）**: 閉合性が高い（不完全な形状が完全な形状として認識される、閉じた形式が多い）
  - **負の値（小さい）**: 閉合性が低い（開いた形式が多い、閉合が弱い）
- **特徴量重要度での解釈**: 
  - 高い重要度の場合、形状の閉合性が本物とフェイクの区別に重要
  - 本物の絵画は、構図の訓練により、閉じた形式や安定した形状が意図的に配置されている
  - AI生成画像は、不自然な開いた形式や不安定な形状になりやすい

##### `closure_explanation`
- **定義**: 閉合性スコアの説明文
- **データ型**: `object` (string)
- **形式**: LLMが生成した説明文（英語）
- **例**: `"The image does not contain any incomplete shapes that require closure. The forms within the image are already complete, but there is no strong sense of stability or coherence due to the lack of a clear focal point."`
- **欠損値**: 1件
- **解釈**: スコアの根拠を理解するための説明文

#### 3.6 図地分離（Figure-Ground Separation）

##### `figure_ground_score`
- **定義**: 図地分離原則のスコア
- **英語名**: Figure-Ground Separation
- **日本語名**: 図地分離
- **原則の説明**: The ability to distinguish the main subject (figure) from the background (ground). Clear separation improves visual clarity.
- **元のスケール**: 1-5の整数値
- **データ型**: `float64`（生の値、1-5の整数値）
- **範囲**: 1 ～ 5（整数値）
- **解釈**:
  - **正の値（大きい）**: 図地分離が高い（主観と背景が明確に区別される）
  - **負の値（小さい）**: 図地分離が低い（主観と背景が混在している、区別が困難）
- **特徴量重要度での解釈**: 
  - 高い重要度の場合、図地分離の明確さが本物とフェイクの区別に重要
  - 本物の絵画は、構図の訓練により、主観と背景が明確に区別されている
  - AI生成画像は、不自然な図地混在や不明確な分離になりやすい

##### `figure_ground_explanation`
- **定義**: 図地分離スコアの説明文
- **データ型**: `object` (string)
- **形式**: LLMが生成した説明文（英語）
- **例**: `"The figure-ground separation in this image is somewhat weak. The people and buildings are closely grouped together, making it difficult to distinguish the main subject (people) from the background (buildings). This can make the image feel cluttered or busy."`
- **欠損値**: 1件
- **解釈**: スコアの根拠を理解するための説明文

---

## データの前処理

### 特徴量の保存形式

すべての数値特徴量（色彩、テクスチャ、エッジ、ゲシュタルト原則スコア）は、**生の値（標準化前）**で保存されています。

**保存形式**:
- 色彩特徴量: 元のスケール（HSV: 0-179, 0-255、RGB: 0-255、比率: 0-1など）
- テクスチャ特徴量: 元のスケール（GLCM: 0-1000、LBP: 0-10など）
- エッジ特徴量: 元のスケール（密度: 0-1、長さ: 0-10000、角度: 0-πなど）
- ゲシュタルト原則スコア: 1-5の整数値

### 標準化（Standardization）

標準化は、**モデル訓練時に訓練データのみで適用**されます（データリーク防止のため）。

**標準化の方法**:
```python
# データ分割（train/test）
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

# 訓練データのみでStandardScalerをfit
scaler = StandardScaler()
scaler.fit(X_train)

# 訓練データとテストデータをtransform
X_train_scaled = scaler.transform(X_train)
X_test_scaled = scaler.transform(X_test)
```

**標準化の特徴**:
- 平均値: 約 0（訓練データの平均で中心化）
- 標準偏差: 約 1（訓練データの標準偏差で正規化）
- 範囲: データによって異なる（通常は -3 ～ +3 の範囲内、極端な値はそれ以上）

**標準化の利点**:
- 異なるスケールの特徴量を同じスケールに統一
- 機械学習モデルの学習が安定する
- 特徴量重要度の比較が容易

**データリーク防止**:
- 特徴量抽出時に標準化を行わない（生の値を保存）
- データ分割後に、訓練データのみでStandardScalerをfit
- 訓練データでfitしたStandardScalerでテストデータをtransform
- スケーラーを`models/scaler.pkl`として保存（SHAP説明生成時に使用）

**注意点**:
- 特徴量ファイルには生の値が保存されている
- 特徴量重要度を解釈する際は、標準化後の値を使用する
- 元の値が必要な場合は、特徴量ファイルから直接読み込む
- 標準化後の値が必要な場合は、保存されたスケーラー（`models/scaler.pkl`）を使用

---

## 特徴量重要度の解釈方法

### SHAP重要度との関係

このファイルの特徴量は、SHAP（SHapley Additive exPlanations）による特徴量重要度の分析に使用されます。

**解釈のポイント**:
1. **正のSHAP値**: その特徴量が「フェイク（label=1）」と予測する方向に寄与
2. **負のSHAP値**: その特徴量が「本物（label=0）」と予測する方向に寄与
3. **SHAP重要度の大きさ**: その特徴量が予測に与える影響の大きさ

### 色彩特徴量の解釈例

#### `mean_hue`のSHAP重要度が高い場合

- **解釈**: 色相が本物とフェイクの区別に重要
- **本物の絵画の傾向**:
  - 特定の色相範囲に集中している可能性
  - 印象派の絵画は、暖色系（赤、オレンジ、黄）や寒色系（青、紫）に偏りやすい
  - 長年の芸術的訓練により、意図的な色相選択が行われている
- **AI生成画像の傾向**:
  - 異なる色相分布を持つ可能性
  - プロンプトの記述に基づいて生成されるため、不自然な色相分布になりやすい
- **SHAP値の解釈**:
  - **正のSHAP値**: その色相値が大きい場合、「フェイク」と予測する方向に寄与
  - **負のSHAP値**: その色相値が小さい場合、「本物」と予測する方向に寄与

#### `color_diversity`のSHAP重要度が高い場合

- **解釈**: 色の多様性が本物とフェイクの区別に重要
- **本物の絵画の傾向**:
  - 芸術的訓練により色の多様性が制御されている
  - 印象派の絵画は、色の多様性を適度に保ちながら、統一感のある構成を維持している
- **AI生成画像の傾向**:
  - 不自然な色の多様性を持つ可能性
  - プロンプトの記述に基づいて生成されるため、過度に多様な色や、逆に単調な色になりやすい
- **SHAP値の解釈**:
  - **正のSHAP値**: 色の多様性が高い場合、「フェイク」と予測する方向に寄与
  - **負のSHAP値**: 色の多様性が低い場合、「本物」と予測する方向に寄与

#### `brightness_skewness`のSHAP重要度が高い場合

- **解釈**: 明度分布の非対称性が本物とフェイクの区別に重要
- **本物の絵画の傾向**:
  - 明度分布が特定の傾向を持つ（右に歪む、左に歪む）
  - 印象派の絵画は、明るい部分が多い（右に歪む）傾向がある
- **AI生成画像の傾向**:
  - 不自然な明度分布を持つ可能性
  - プロンプトの記述に基づいて生成されるため、不自然な明度分布になりやすい
- **SHAP値の解釈**:
  - **正のSHAP値**: 明度分布が右に歪む場合、「フェイク」と予測する方向に寄与
  - **負のSHAP値**: 明度分布が左に歪む場合、「本物」と予測する方向に寄与

### ゲシュタルト原則スコアの解釈例

#### `simplicity_score`のSHAP重要度が高い場合

- **解釈**: 簡潔性が本物とフェイクの区別に重要
- **本物の絵画の傾向**:
  - 長年の芸術的訓練により、簡潔な構成になりやすい
  - 印象派の絵画は、簡潔性を重視した構成が多い
  - 不要な要素を排除し、本質的な要素のみを残す傾向がある
- **AI生成画像の傾向**:
  - プロンプトの複雑さにより、複雑な構成になりやすい
  - プロンプトに記載された要素をすべて含めようとするため、過度に複雑な構成になりやすい
- **SHAP値の解釈**:
  - **正のSHAP値**: 簡潔性スコアが高い場合、「フェイク」と予測する方向に寄与（逆説的）
  - **負のSHAP値**: 簡潔性スコアが低い場合、「本物」と予測する方向に寄与（逆説的）
  - **注意**: SHAP値の符号は、モデルの学習結果に依存するため、実際の解釈はモデルの予測結果を確認する必要がある

#### `figure_ground_score`のSHAP重要度が高い場合

- **解釈**: 図地分離が本物とフェイクの区別に重要
- **本物の絵画の傾向**:
  - 構図の訓練により明確な図地分離が実現されている
  - 印象派の絵画は、主観と背景を明確に区別する技法が発達している
  - コントラストや色の使い分けにより、図と地を明確に分離している
- **AI生成画像の傾向**:
  - 不自然な図地混在や不明確な分離になりやすい
  - プロンプトの記述に基づいて生成されるため、図と地の境界が不明確になりやすい
- **SHAP値の解釈**:
  - **正のSHAP値**: 図地分離スコアが高い場合、「フェイク」と予測する方向に寄与（逆説的）
  - **負のSHAP値**: 図地分離スコアが低い場合、「本物」と予測する方向に寄与（逆説的）
  - **注意**: SHAP値の符号は、モデルの学習結果に依存するため、実際の解釈はモデルの予測結果を確認する必要がある

#### `proximity_score`のSHAP重要度が高い場合

- **解釈**: 近接性が本物とフェイクの区別に重要
- **本物の絵画の傾向**:
  - 構図の訓練により、要素の配置が意図的に近接している
  - 印象派の絵画は、要素の配置により視覚的な統一感を生み出している
- **AI生成画像の傾向**:
  - ランダムな配置や不自然な近接関係になりやすい
  - プロンプトの記述に基づいて生成されるため、要素の配置が不自然になりやすい
- **SHAP値の解釈**:
  - **正のSHAP値**: 近接性スコアが高い場合、「フェイク」と予測する方向に寄与（逆説的）
  - **負のSHAP値**: 近接性スコアが低い場合、「本物」と予測する方向に寄与（逆説的）

#### `similarity_score`のSHAP重要度が高い場合

- **解釈**: 類同性が本物とフェイクの区別に重要
- **本物の絵画の傾向**:
  - 色調や形状の統一性により、類似した要素が意図的に配置されている
  - 印象派の絵画は、色調の統一性により、視覚的な調和を実現している
- **AI生成画像の傾向**:
  - 不自然な類似性や不統一な要素配置になりやすい
  - プロンプトの記述に基づいて生成されるため、要素の類似性が不自然になりやすい
- **SHAP値の解釈**:
  - **正のSHAP値**: 類同性スコアが高い場合、「フェイク」と予測する方向に寄与（逆説的）
  - **負のSHAP値**: 類同性スコアが低い場合、「本物」と予測する方向に寄与（逆説的）

#### `continuity_score`のSHAP重要度が高い場合

- **解釈**: 連続性が本物とフェイクの区別に重要
- **本物の絵画の傾向**:
  - 筆の動きや構図により、滑らかな連続性が生まれる
  - 印象派の絵画は、筆触により、視覚的な連続性を実現している
- **AI生成画像の傾向**:
  - 不自然な断続や不連続な線になりやすい
  - プロンプトの記述に基づいて生成されるため、線やパスの連続性が不自然になりやすい
- **SHAP値の解釈**:
  - **正のSHAP値**: 連続性スコアが高い場合、「フェイク」と予測する方向に寄与（逆説的）
  - **負のSHAP値**: 連続性スコアが低い場合、「本物」と予測する方向に寄与（逆説的）

#### `closure_score`のSHAP重要度が高い場合

- **解釈**: 閉合性が本物とフェイクの区別に重要
- **本物の絵画の傾向**:
  - 構図の訓練により、閉じた形式や安定した形状が意図的に配置されている
  - 印象派の絵画は、閉じた形式により、視覚的な安定性を実現している
- **AI生成画像の傾向**:
  - 不自然な開いた形式や不安定な形状になりやすい
  - プロンプトの記述に基づいて生成されるため、形状の閉合性が不自然になりやすい
- **SHAP値の解釈**:
  - **正のSHAP値**: 閉合性スコアが高い場合、「フェイク」と予測する方向に寄与（逆説的）
  - **負のSHAP値**: 閉合性スコアが低い場合、「本物」と予測する方向に寄与（逆説的）

### SHAP値の解釈における注意点

1. **符号の意味**: SHAP値の符号は、モデルの学習結果に依存するため、必ずしも直感的ではない場合がある
2. **標準化の影響**: すべての特徴量が標準化されているため、SHAP値は標準化後の値に対する寄与を表す
3. **交互作用**: 複数の特徴量が交互作用している場合、個別のSHAP値だけでは完全な解釈が困難な場合がある
4. **モデルの予測結果との照合**: SHAP値の解釈は、モデルの実際の予測結果と照合して確認する必要がある

---

## 統計情報

### データセットの概要

- **総行数**: 17,328行
- **総カラム数**: 56カラム
- **本物画像**: 8,664行（label=0）
- **フェイク画像**: 8,664行（label=1）
- **画像ペア数**: 8,664ペア

### 特徴量の分布

- **色彩特徴量**: 19カラム（生の値）
  - HSV基本統計量: 6カラム（mean_hue, mean_saturation, mean_value, hue_std, saturation_std, value_std）
  - 色の多様性: 1カラム（color_diversity）
  - 支配色HSV統計量: 9カラム（hue_mean/std, saturation_mean/std, value_mean/std, ratio_max/mean/std）
  - 明度分布: 3カラム（brightness_skewness, brightness_kurtosis, brightness_entropy）
- **テクスチャ特徴量**: 10カラム（生の値）
  - GLCM: 5カラム（contrast, dissimilarity, homogeneity, energy, correlation）
  - LBP: 5カラム（mean, std, histogram_entropy, histogram_skewness, histogram_kurtosis）
- **エッジ特徴量**: 9カラム（生の値）
  - 密度・カウント: 2カラム（density, count）
  - 長さ: 2カラム（mean_length, std_length）
  - 方向性: 2カラム（orientation_mean, orientation_std）
  - 滑らかさ・曲率: 3カラム（smoothness, curvature_mean, curvature_std）
- **ゲシュタルト原則スコア**: 6カラム（生の値、1-5の整数値）
- **メタデータ**: 6カラム（image_id, image_path, label, source, generation_model, image_name）
- **説明文**: 6カラム（各ゲシュタルト原則の説明文）

### 特徴量の総数

- **数値特徴量**: 44カラム（色彩19 + テクスチャ10 + エッジ9 + ゲシュタルト6）
- **非数値カラム**: 12カラム（メタデータ6 + 説明文6）

### 欠損値

- **説明文カラム**: 各原則の説明文に1件ずつ欠損（合計6件）
- **数値特徴量**: 欠損なし

---

## 参考文献

1. **ゲシュタルト原則**: 
   - Wikipedia: Gestalt psychology
   - arXiv 2504.12511: ゲシュタルト原則評価のアプローチ

2. **色彩特徴量抽出**:
   - OpenCV: HSV色空間
   - scikit-learn: K-meansクラスタリング

3. **SHAP説明可能性**:
   - SHAP: SHapley Additive exPlanations
   - Lundberg & Lee (2017): "A Unified Approach to Interpreting Model Predictions"

---

## 更新履歴

- 2025-11-08: ドキュメントを最新の特徴量構成に更新（総カラム数: 56カラム、数値特徴量: 44カラム、色彩19 + テクスチャ10 + エッジ9 + ゲシュタルト6）
- 2025-11-07: 支配色の特徴量をRGB値からHSV統計量に変換（20カラム → 9カラム）、重複特徴量を削除（contrast, brightness_mean, brightness_std）、LBPヒストグラムのビン特徴量（histogram_0～9）を削除し、統計量のみを使用するように改善（解釈性向上）
- 2025-11-07: テクスチャ特徴量（GLCM + LBP）とエッジ特徴量（Canny）を追加、データ前処理の説明を更新（標準化はモデル訓練時に適用）
- 2025-11-05: 初版作成（Phase 3完了後）

