# 説明可能AIによる絵画様式分類プロジェクト
# 設定ファイル

# API設定
api:
  base_url: "https://collectionapi.metmuseum.org/public/collection/v1"
  rate_limit: 25  # リクエスト/秒（24時間完結用）
  timeout: 30     # タイムアウト（秒）

# データ設定
data:
  output_dir: "data"
  artifacts_subdir: "artifacts"
  experiments_subdir: "experiments"
  raw_data_dir: "data/raw/raw_data"
  filtered_data_dir: "data/curated/filtered_data"
  images_dir: "raw/raw_images"
  paintings_images_dir: "paintings_images"
  metadata_file: "artwork_metadata.csv"
  paintings_metadata_file: "paintings_metadata.csv"
  features_file: "color_features.pkl"
  paintings_features_file: "paintings_features.pkl"
  min_samples_per_class: 250
  max_samples_per_class: 1000
  use_timestamp: false  # trueの場合のみanalysis_yyyymmddHHMM配下へ保存
  latest_label: "latest"  # use_timestamp=false時に使用する最新版ディレクトリ名
  snapshot_prefix: "snapshot"  # 最新版からスナップショットを切る際のプレフィックス

# 画像処理設定
image_processing:
  target_size: [512, 512]  # リサイズ後のサイズ
  color_space: "HSV"       # 色空間（HSV, RGB, LAB）
  resize_method: "bilinear"

# 特徴量設定
features:
  color:
    - "mean_hue"
    - "mean_saturation" 
    - "mean_value"
    - "hue_std"
    - "saturation_std"
    - "value_std"
    - "contrast"
    - "color_diversity"
    - "dominant_colors"
  
  composition:
    - "brightness_distribution"
    - "color_concentration"
    - "edge_density"
  
  texture:
    - "glcm_contrast"
    - "glcm_dissimilarity"
    - "glcm_homogeneity"
    - "glcm_energy"
    - "glcm_correlation"
    - "lbp_mean"
    - "lbp_std"
    - "lbp_histogram"
  
  edge:
    - "edge_density"
    - "edge_mean_length"
    - "edge_std_length"
    - "edge_count"
    - "edge_orientation_mean"
    - "edge_orientation_std"
    - "edge_smoothness"
    - "edge_curvature_mean"
    - "edge_curvature_std"

# 分類設定
classification:
  model_type: "random_forest"
  test_size: 0.2
  random_state: 42
  cv_folds: 5
  
  # ランダムフォレストパラメータ
  random_forest:
    n_estimators: 100
    max_depth: 10
    min_samples_split: 5
    min_samples_leaf: 2
    random_state: 42

# SHAP設定
shap:
  max_samples: 100  # 説明用サンプル数
  background_samples: 50  # 背景サンプル数

# 可視化設定
visualization:
  figure_size: [12, 8]
  dpi: 300
  style: "whitegrid"
  color_palette: "husl"
  output_dir: "visualizations"

# ハイブリッドデータ収集設定
hybrid_collection:
  csv_url: "https://github.com/metmuseum/openaccess/raw/master/MetObjects.csv"
  checkpoint_interval: 100  # N件ごとに進捗保存
  max_retries: 3
  retry_base_delay: 1  # 秒
  api_fields:  # API限定で取得するフィールド
    - primaryImage
    - primaryImageSmall
    - additionalImages
    - constituents
    - tags
    - measurements
    - galleryNumber
    - objectWikidata_URL

# 絵画フィルター設定（分析結果に基づく）
painting_filters:
  # Departmentフィルター: European Paintingsのみ
  departments:
    - "European Paintings"
  
  # 絵画関連Classification（純粋な絵画のみ）
  classifications:
    - "Paintings"
  
  # Mediumフィルターは適用しない（多様な技法の絵画を対象とする）
  
  # 予想される絞り込み後の件数（European Paintingsの絵画）
  expected_count: 2290
  expected_percentage: 0.5

# WikiArt_VLMデータセット設定
wikiart_vlm:
  base_path: "data/external/WikiArt_VLM-main"
  generation_models:
    - "Stable-Diffusion"
    - "FLUX"
    - "F-Lite"
  train_ratio: 0.7
  val_ratio: 0.15
  test_ratio: 0.15

# ゲシュタルト原則スコアリング設定
gestalt_scoring:
  model_name: "llava:7b"  # Ollamaモデル名 (llava:latest/llava:7b, llava:13b, llava:34b)
  ollama_base_url: "http://localhost:11434"  # OllamaサーバーのURL
  score_scale: [1, 5]  # スコアリングスケール（最小値、最大値）
  max_retries: 3  # API呼び出しの最大リトライ回数
  retry_delay: 1.0  # リトライ間隔（秒）
  batch_size: 10  # チェックポイント保存間隔
  reuse_existing_results: true  # 既存スコアがあれば再利用
  force_run: false  # 強制的に再スコアリングする場合のみtrue

# WikiArt_VLMフィルタリング設定
wikiart_filters:
  enabled: true  # フィルタリングを有効にするか（デフォルト: Impressionismに絞る）
  wikiart_data_path: "data/external/WikiArt/wikiart_data.csv"  # Hugging Faceデータセットのパス
  style: ["Impressionism"]  # デフォルト: Impressionismに絞る（例: ["Impressionism", "Post_Impressionism"]）
  artist: []  # 追加でartist名でフィルタリング（オプション）
  include_unknown: false  # "Unknown Artist"を含めるか

# ログ設定
logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "logs/project.log"
