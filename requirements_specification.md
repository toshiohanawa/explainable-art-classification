# 説明可能AIによる絵画様式分類プロジェクト 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**AIは名画を理解できるか？ - 説明可能AIによる絵画様式分類**

### 1.2 目的
- ランダムフォレストとSHAPを用いて美術作品の様式を分類
- その判断根拠を解釈可能な形で可視化
- 機械学習講義用の教材として活用

### 1.3 対象ユーザー
- データサイエンスを学習中の学生
- 機械学習と説明可能AIの実践的理解を求める学習者
- 芸術とテクノロジーの融合に興味のある学習者

## 2. 機能要件

### 2.1 データ収集機能
- **Metropolitan Museum API**からの作品データ取得
- 対象作品の画像ダウンロード（高解像度JPEG形式）
- メタデータの整理・保存（制作年、画材、寸法、文化圏等）

### 2.2 特徴量抽出機能
- **色彩特徴量**
  - 平均色相（Hue）、彩度（Saturation）、明度（Value）
  - 色の多様性指標（色相の分散、彩度の分散）
  - 支配色の分布（ヒストグラム）
  - コントラスト指標
- **構図特徴量**（オプション）
  - 明暗の配置パターン
  - 色彩の集中度
  - 画像の分割領域ごとの特徴

### 2.3 分類機能
- **ランダムフォレスト分類器**の実装
- ハイパーパラメータの自動チューニング
- 交差検証による性能評価
- 分類結果の保存・出力

### 2.4 説明可能性機能
- **SHAP値**の計算
- 特徴量重要度の可視化
- 個別予測の説明（waterfall plot, force plot）
- 特徴量の寄与度分析

### 2.5 可視化機能
- 分類結果の可視化
- SHAP summary plot
- 誤分類作品の分析表示
- 特徴量分布の可視化

## 3. 非機能要件

### 3.1 性能要件
- **データ処理**: 1,000点の作品を1時間以内で処理
- **分類精度**: 最低70%以上の精度を目標
- **レスポンス時間**: 個別予測は5秒以内
- **メモリ使用量**: 8GB以下での動作

### 3.2 可用性要件
- **API制限**: Metropolitan Museum APIの制限（80リクエスト/秒）を遵守
- **エラーハンドリング**: API接続エラー時の適切な処理
- **データバックアップ**: 取得したデータの適切な保存

### 3.3 拡張性要件
- **モジュール設計**: 各機能を独立したモジュールとして実装
- **設定ファイル**: パラメータの外部設定化
- **ログ機能**: 処理状況の記録

## 4. 技術仕様

### 4.1 データソース
- **Metropolitan Museum API**
  - エンドポイント: `https://collectionapi.metmuseum.org/public/collection/v1/`
  - データ形式: JSON
  - ライセンス: CC0（商用・非商用利用可能）
  - 制限: 80リクエスト/秒

### 4.2 技術スタック
- **プログラミング言語**: Python 3.9+
- **機械学習ライブラリ**: scikit-learn, pandas, numpy
- **画像処理**: OpenCV, PIL (Pillow)
- **説明可能AI**: SHAP
- **可視化**: matplotlib, seaborn, plotly
- **API通信**: requests
- **データ管理**: SQLite（ローカル）、CSV

### 4.3 分類対象
- **候補1**: 印象派 vs 非印象派（二値分類）
- **候補2**: 複数様式（バロック、印象派、キュビズム等）の多クラス分類
- **候補3**: 印象派度スコア（回帰問題）

### 4.4 特徴量設計
```python
# 色彩特徴量の例
color_features = {
    'mean_hue': '平均色相',
    'mean_saturation': '平均彩度', 
    'mean_value': '平均明度',
    'hue_std': '色相の標準偏差',
    'saturation_std': '彩度の標準偏差',
    'value_std': '明度の標準偏差',
    'contrast': 'コントラスト指標',
    'color_diversity': '色の多様性',
    'dominant_colors': '支配色の分布'
}
```

## 5. データ要件

### 5.1 データ量
- **最小データセット**: 500点（各クラス250点）
- **推奨データセット**: 1,000-2,000点
- **最大データセット**: 5,000点（API制限を考慮）

### 5.2 データ品質要件
- **画像品質**: 最低解像度512x512ピクセル
- **メタデータ完全性**: 制作年、作者、様式情報が80%以上
- **ラベル品質**: 芸術史専門家による検証（可能な範囲で）

### 5.3 データ保存形式
- **画像**: JPEG形式、ローカル保存
- **メタデータ**: CSV形式
- **特徴量**: Pickle形式（高速読み込み用）

## 6. 実装計画

### 6.1 Phase 1: データ収集（1-2週間）
1. Metropolitan Museum APIの調査・テスト
2. 対象作品の選定基準策定
3. データ取得スクリプトの実装
4. パイロットデータ（100点）の取得・検証

### 6.2 Phase 2: 特徴量エンジニアリング（2-3週間）
1. 画像前処理パイプラインの実装
2. 色彩特徴量抽出の実装
3. 構図特徴量抽出の実装（オプション）
4. 特徴量の正規化・標準化

### 6.3 Phase 3: モデル構築（2-3週間）
1. ランダムフォレスト分類器の実装
2. ハイパーパラメータチューニング
3. 交差検証による性能評価
4. ベースライン性能の確立

### 6.4 Phase 4: SHAP解釈（1-2週間）
1. SHAP値計算の実装
2. 可視化機能の実装
3. 特徴量重要度の分析
4. 個別予測の説明機能

### 6.5 Phase 5: 統合・評価（1-2週間）
1. 全機能の統合
2. エンドツーエンドテスト
3. 性能評価・最適化
4. ドキュメント作成

## 7. 評価指標

### 7.1 分類性能指標
- **精度（Accuracy）**: 全体の正解率
- **適合率（Precision）**: 各クラスの適合率
- **再現率（Recall）**: 各クラスの再現率
- **F1スコア**: 適合率と再現率の調和平均

### 7.2 説明可能性指標
- **SHAP値の一貫性**: 類似作品でのSHAP値の安定性
- **特徴量重要度の解釈性**: 芸術理論との整合性
- **可視化の分かりやすさ**: 学習者による評価

### 7.3 教育的価値指標
- **学習効果**: 講義前後の理解度テスト
- **議論の活発さ**: 学生の質問・議論の質と量
- **実用性**: 他のデータセットへの応用可能性

## 8. リスク管理

### 8.1 技術的リスク
- **API制限**: レート制限による処理遅延
- **データ品質**: 不完全なメタデータ
- **計算リソース**: 大規模データ処理時のメモリ不足

### 8.2 教育的リスク
- **難易度**: 学生の理解レベルとの乖離
- **時間制約**: 講義時間内での完結
- **興味維持**: 抽象的な概念の理解困難

### 8.3 対策
- **段階的実装**: 機能を段階的に追加
- **サンプルデータ**: 小規模データでの事前検証
- **ドキュメント**: 詳細な説明資料の準備

## 9. 成功基準

### 9.1 技術的成功基準
- 分類精度70%以上を達成
- SHAPによる説明可能性を実現
- 1,000点以上のデータで動作

### 9.2 教育的成功基準
- 学生が機械学習の基本概念を理解
- 説明可能AIの価値を実感
- 芸術とテクノロジーの融合を体験

### 9.3 学術的成功基準
- 再利用可能なコードとデータセットの提供
- 芸術分野への説明可能AI応用例の提示
- 今後の研究への発展可能性

## 10. 今後の拡張可能性

### 10.1 技術的拡張
- ディープラーニングモデルへの拡張
- リアルタイム分類機能
- Webアプリケーション化

### 10.2 教育的拡張
- 他の芸術様式への応用
- 学生による独自データセット作成
- 国際的な教育プロジェクトへの展開

### 10.3 学術的拡張
- 論文投稿
- 国際会議での発表
- オープンソースプロジェクト化

---

## 付録

### A. 参考資料
- [Metropolitan Museum API Documentation](https://metmuseum.github.io/)
- [SHAP Documentation](https://shap.readthedocs.io/)
- [scikit-learn Random Forest](https://scikit-learn.org/stable/modules/ensemble.html#random-forests)

### B. 用語集
- **SHAP**: SHapley Additive exPlanations - 機械学習モデルの説明可能性を提供する手法
- **ランダムフォレスト**: 複数の決定木を組み合わせたアンサンブル学習手法
- **特徴量エンジニアリング**: 生データから機械学習に適した特徴量を作成する過程
- **交差検証**: モデルの性能を客観的に評価する手法

### C. 開発環境
- **OS**: Windows 10/11, macOS, Linux
- **Python**: 3.9以上
- **メモリ**: 8GB以上推奨
- **ストレージ**: 10GB以上の空き容量
